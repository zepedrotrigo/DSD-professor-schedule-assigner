{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  Object.defineProperty(o, k2, {\n    enumerable: true,\n    get: function () {\n      return m[k];\n    }\n  });\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar base_1 = require(\"./base\");\n\nvar Url = __importStar(require(\"url\"));\n\nfunction isRelativeUrl(url) {\n  var u = Url.parse(url);\n  return u.protocol === null && u.host === null && u.port === null;\n}\n\nfunction isSameOrigin(a, b) {\n  var ua = Url.parse(a);\n  var ub = Url.parse(b); // https://developer.mozilla.org/en-US/docs/Web/Security/Same-origin_policy\n\n  return ua.protocol === ub.protocol && ua.hostname === ub.hostname && ua.port === ub.port;\n}\n\nvar BrowserImage =\n/** @class */\nfunction (_super) {\n  __extends(BrowserImage, _super);\n\n  function BrowserImage() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  BrowserImage.prototype._initCanvas = function () {\n    var img = this.image;\n    var canvas = this._canvas = document.createElement('canvas');\n    var context = this._context = canvas.getContext('2d');\n    canvas.className = 'vibrant-canvas';\n    canvas.style.display = 'none';\n    this._width = canvas.width = img.width;\n    this._height = canvas.height = img.height;\n    context.drawImage(img, 0, 0);\n    document.body.appendChild(canvas);\n  };\n\n  BrowserImage.prototype.load = function (image) {\n    var _this = this;\n\n    var img = null;\n    var src = null;\n\n    if (typeof image === 'string') {\n      img = document.createElement('img');\n\n      if (!isRelativeUrl(image) && !isSameOrigin(window.location.href, image)) {\n        img.crossOrigin = 'anonymous';\n      }\n\n      src = img.src = image;\n    } else if (image instanceof HTMLImageElement) {\n      img = image;\n      src = image.src;\n    } else {\n      return Promise.reject(new Error(\"Cannot load buffer as an image in browser\"));\n    }\n\n    this.image = img;\n    return new Promise(function (resolve, reject) {\n      var onImageLoad = function () {\n        _this._initCanvas();\n\n        resolve(_this);\n      };\n\n      if (img.complete) {\n        // Already loaded\n        onImageLoad();\n      } else {\n        img.onload = onImageLoad;\n\n        img.onerror = function (e) {\n          return reject(new Error(\"Fail to load image: \" + src));\n        };\n      }\n    });\n  };\n\n  BrowserImage.prototype.clear = function () {\n    this._context.clearRect(0, 0, this._width, this._height);\n  };\n\n  BrowserImage.prototype.update = function (imageData) {\n    this._context.putImageData(imageData, 0, 0);\n  };\n\n  BrowserImage.prototype.getWidth = function () {\n    return this._width;\n  };\n\n  BrowserImage.prototype.getHeight = function () {\n    return this._height;\n  };\n\n  BrowserImage.prototype.resize = function (targetWidth, targetHeight, ratio) {\n    var _a = this,\n        canvas = _a._canvas,\n        context = _a._context,\n        img = _a.image;\n\n    this._width = canvas.width = targetWidth;\n    this._height = canvas.height = targetHeight;\n    context.scale(ratio, ratio);\n    context.drawImage(img, 0, 0);\n  };\n\n  BrowserImage.prototype.getPixelCount = function () {\n    return this._width * this._height;\n  };\n\n  BrowserImage.prototype.getImageData = function () {\n    return this._context.getImageData(0, 0, this._width, this._height);\n  };\n\n  BrowserImage.prototype.remove = function () {\n    if (this._canvas && this._canvas.parentNode) {\n      this._canvas.parentNode.removeChild(this._canvas);\n    }\n  };\n\n  return BrowserImage;\n}(base_1.ImageBase);\n\nexports.default = BrowserImage;","map":{"version":3,"mappings":"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","names":["isRelativeUrl","url","u","Url","parse","protocol","host","port","isSameOrigin","a","b","ua","ub","hostname","__extends","BrowserImage","img","image","canvas","_canvas","document","createElement","context","_context","getContext","className","style","display","_width","width","_height","height","drawImage","body","appendChild","src","window","location","href","crossOrigin","HTMLImageElement","Promise","reject","Error","resolve","onImageLoad","_this","_initCanvas","complete","onload","onerror","e","clearRect","imageData","putImageData","targetWidth","targetHeight","ratio","scale","getImageData","parentNode","removeChild","base_1"],"sources":["/home/fortnyce/Desktop/work_schedule_assigner/node_modules/node-vibrant/src/image/browser.ts"],"sourcesContent":["/* eslint-env browser */\nimport { Options, ImageData, ImageSource, ImageCallback } from '../typing'\nimport { ImageBase } from './base'\nimport * as Url from 'url'\n\nfunction isRelativeUrl (url: string): boolean {\n  let u = Url.parse(url)\n  return u.protocol === null &&\n    u.host === null &&\n    u.port === null\n}\n\nfunction isSameOrigin (a: string, b: string): boolean {\n  let ua = Url.parse(a)\n  let ub = Url.parse(b)\n\n  // https://developer.mozilla.org/en-US/docs/Web/Security/Same-origin_policy\n  return ua.protocol === ub.protocol &&\n    ua.hostname === ub.hostname &&\n    ua.port === ub.port\n}\n\nexport default class BrowserImage extends ImageBase {\n  image: HTMLImageElement\n  private _canvas: HTMLCanvasElement\n  private _context: CanvasRenderingContext2D\n  private _width: number\n  private _height: number\n  private _initCanvas (): void {\n    let img = this.image\n    let canvas = this._canvas = document.createElement('canvas')\n    let context = this._context = canvas.getContext('2d')!\n\n    canvas.className = 'vibrant-canvas'\n    canvas.style.display = 'none'\n\n    this._width = canvas.width = img.width\n    this._height = canvas.height = img.height\n\n    context!.drawImage(img, 0, 0)\n\n    document.body.appendChild(canvas)\n  }\n  load (image: ImageSource): Promise<ImageBase> {\n    let img: HTMLImageElement | null = null\n    let src: string | null = null\n    if (typeof image === 'string') {\n      img = document.createElement('img')\n      if (!isRelativeUrl(image) && !isSameOrigin(window.location.href, image)) {\n        img.crossOrigin = 'anonymous'\n      }\n      src = img.src = image\n    } else if (image instanceof HTMLImageElement) {\n      img = image\n      src = image.src\n    } else {\n      return Promise.reject(new Error(`Cannot load buffer as an image in browser`))\n    }\n    this.image = img\n\n    return new Promise<ImageBase>((resolve, reject) => {\n      let onImageLoad = () => {\n        this._initCanvas()\n        resolve(this)\n      }\n\n      if (img!.complete) {\n        // Already loaded\n        onImageLoad()\n      } else {\n        img!.onload = onImageLoad\n        img!.onerror = (e) => reject(new Error(`Fail to load image: ${src}`))\n      }\n    })\n  }\n  clear (): void {\n    this._context.clearRect(0, 0, this._width, this._height)\n  }\n  update (imageData: ImageData): void {\n    this._context.putImageData(imageData as any, 0, 0)\n  }\n  getWidth (): number {\n    return this._width\n  }\n  getHeight (): number {\n    return this._height\n  }\n  resize (targetWidth: number, targetHeight: number, ratio: number): void {\n    let { _canvas: canvas, _context: context, image: img } = this\n\n    this._width = canvas.width = targetWidth\n    this._height = canvas.height = targetHeight\n\n    context.scale(ratio, ratio)\n    context.drawImage(img, 0, 0)\n  }\n  getPixelCount (): number {\n    return this._width * this._height\n  }\n  getImageData (): ImageData {\n    return this._context.getImageData(0, 0, this._width, this._height)\n  }\n  remove (): void {\n    if (this._canvas && this._canvas.parentNode) {\n      this._canvas.parentNode.removeChild(this._canvas)\n    }\n  }\n}\n"]},"metadata":{},"sourceType":"script"}