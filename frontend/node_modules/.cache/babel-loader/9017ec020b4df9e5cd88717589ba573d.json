{"ast":null,"code":"\"use strict\";\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  Object.defineProperty(o, k2, {\n    enumerable: true,\n    get: function () {\n      return m[k];\n    }\n  });\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar color_1 = require(\"./color\");\n\nvar builder_1 = __importDefault(require(\"./builder\"));\n\nvar Util = __importStar(require(\"./util\"));\n\nvar Quantizer = __importStar(require(\"./quantizer\"));\n\nvar Generator = __importStar(require(\"./generator\"));\n\nvar Filters = __importStar(require(\"./filter\"));\n\nvar defaults = require(\"lodash/defaults\");\n\nvar Vibrant =\n/** @class */\nfunction () {\n  function Vibrant(_src, opts) {\n    this._src = _src;\n    this.opts = defaults({}, opts, Vibrant.DefaultOpts);\n    this.opts.combinedFilter = Filters.combineFilters(this.opts.filters);\n  }\n\n  Vibrant.from = function (src) {\n    return new builder_1.default(src);\n  };\n\n  Vibrant.prototype._process = function (image, opts) {\n    var quantizer = opts.quantizer,\n        generator = opts.generator;\n    image.scaleDown(opts);\n    return image.applyFilter(opts.combinedFilter).then(function (imageData) {\n      return quantizer(imageData.data, opts);\n    }).then(function (colors) {\n      return color_1.Swatch.applyFilter(colors, opts.combinedFilter);\n    }).then(function (colors) {\n      return Promise.resolve(generator(colors));\n    });\n  };\n\n  Vibrant.prototype.palette = function () {\n    return this.swatches();\n  };\n\n  Vibrant.prototype.swatches = function () {\n    return this._palette;\n  };\n\n  Vibrant.prototype.getPalette = function (cb) {\n    var _this = this;\n\n    var image = new this.opts.ImageClass();\n    var result = image.load(this._src).then(function (image) {\n      return _this._process(image, _this.opts);\n    }).then(function (palette) {\n      _this._palette = palette;\n      image.remove();\n      return palette;\n    }, function (err) {\n      image.remove();\n      throw err;\n    });\n    if (cb) result.then(function (palette) {\n      return cb(null, palette);\n    }, function (err) {\n      return cb(err);\n    });\n    return result;\n  };\n\n  Vibrant.Builder = builder_1.default;\n  Vibrant.Quantizer = Quantizer;\n  Vibrant.Generator = Generator;\n  Vibrant.Filter = Filters;\n  Vibrant.Util = Util;\n  Vibrant.Swatch = color_1.Swatch;\n  Vibrant.DefaultOpts = {\n    colorCount: 64,\n    quality: 5,\n    generator: Generator.Default,\n    ImageClass: null,\n    quantizer: Quantizer.MMCQ,\n    filters: [Filters.Default]\n  };\n  return Vibrant;\n}();\n\nexports.default = Vibrant;","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AASA;;AAEA;;AAEA;;AAEA;;AACA;;AACA;;AAEA;;AAEA;AAAA;AAAA;AAuBE,mBAAoBA,IAApB,EAAuCC,IAAvC,EAA8D;AAA1C;AAClB,SAAKA,IAAL,GAA6BC,QAAQ,CAAC,EAAD,EAAKD,IAAL,EAAWE,OAAO,CAACC,WAAnB,CAArC;AACA,SAAKH,IAAL,CAAUI,cAAV,GAA2BC,OAAO,CAACC,cAAR,CAAuB,KAAKN,IAAL,CAAUO,OAAjC,CAA3B;AACD;;AATML,iBAAP,UAAYM,GAAZ,EAA4B;AAC1B,WAAO,IAAIC,iBAAJ,CAAYD,GAAZ,CAAP;AACD,GAFM;;AAUCN,+BAAR,UAAiBQ,KAAjB,EAA+BV,IAA/B,EAAoD;AAC5C,iBAAS,GAAgBA,IAAI,UAA7B;AAAA,QAAWW,SAAS,GAAKX,IAAI,UAA7B;AAENU,SAAK,CAACE,SAAN,CAAgBZ,IAAhB;AAEA,WAAOU,KAAK,CAACG,WAAN,CAAkBb,IAAI,CAACI,cAAvB,EACJU,IADI,CACC,UAACC,SAAD,EAAU;AAAK,sBAAS,CAACA,SAAS,CAACC,IAAX,EAAiBhB,IAAjB,CAAT;AAA+B,KAD/C,EAEJc,IAFI,CAEC,UAACG,MAAD,EAAO;AAAK,4BAAOJ,WAAP,CAAmBI,MAAnB,EAA2BjB,IAAI,CAACI,cAAhC;AAA+C,KAF5D,EAGJU,IAHI,CAGC,UAACG,MAAD,EAAO;AAAK,oBAAO,CAACC,OAAR,CAAgBP,SAAU,CAACM,MAAD,CAA1B;AAAmC,KAHhD,CAAP;AAID,GATO;;AAWRf;AACE,WAAO,KAAKiB,QAAL,EAAP;AACD,GAFD;;AAGAjB;AACE,WAAO,KAAKkB,QAAZ;AACD,GAFD;;AAIAlB,2CAAWmB,EAAX,EAAiC;AAAjC;;AACE,QAAIX,KAAK,GAAG,IAAI,KAAKV,IAAL,CAAUsB,UAAd,EAAZ;AACA,QAAMC,MAAM,GAAGb,KAAK,CAACc,IAAN,CAAW,KAAKzB,IAAhB,EACZe,IADY,CACP,UAACJ,KAAD,EAAM;AAAK,kBAAI,CAACe,QAAL,CAAcf,KAAd,EAAqBgB,KAAI,CAAC1B,IAA1B;AAA+B,KADnC,EAEZc,IAFY,CAEP,UAACa,OAAD,EAAQ;AACZD,WAAI,CAACN,QAAL,GAAgBO,OAAhB;AACAjB,WAAK,CAACkB,MAAN;AACA,aAAOD,OAAP;AACD,KANY,EAMV,UAACE,GAAD,EAAI;AACLnB,WAAK,CAACkB,MAAN;AACA,YAAMC,GAAN;AACD,KATY,CAAf;AAUA,QAAIR,EAAJ,EAAQE,MAAM,CAACT,IAAP,CAAY,UAACa,OAAD,EAAQ;AAAK,eAAE,CAAC,IAAD,EAAQA,OAAR,CAAF;AAAkB,KAA3C,EAA6C,UAACE,GAAD,EAAI;AAAK,eAAE,CAACA,GAAD,CAAF;AAAO,KAA7D;AACR,WAAON,MAAP;AACD,GAdD;;AA5COrB,oBAAUO,iBAAV;AACAP,sBAAY4B,SAAZ;AACA5B,sBAAY6B,SAAZ;AACA7B,mBAASG,OAAT;AACAH,iBAAO8B,IAAP;AACA9B,mBAAS+B,cAAT;AAEA/B,wBAAgC;AACrCgC,cAAU,EAAE,EADyB;AAErCC,WAAO,EAAE,CAF4B;AAGrCxB,aAAS,EAAEoB,SAAS,CAACK,OAHgB;AAIrCd,cAAU,EAAE,IAJyB;AAKrCe,aAAS,EAAEP,SAAS,CAACQ,IALgB;AAMrC/B,WAAO,EAAE,CAACF,OAAO,CAAC+B,OAAT;AAN4B,GAAhC;AAoDT;AA5DA;;AA8DAG,kBAAerC,OAAf","names":["_src","opts","defaults","Vibrant","DefaultOpts","combinedFilter","Filters","combineFilters","filters","src","builder_1","image","generator","scaleDown","applyFilter","then","imageData","data","colors","resolve","swatches","_palette","cb","ImageClass","result","load","_process","_this","palette","remove","err","Quantizer","Generator","Util","color_1","colorCount","quality","Default","quantizer","MMCQ","exports"],"sources":["/home/fortnyce/Desktop/work_schedule_assigner/node_modules/node-vibrant/src/vibrant.ts"],"sourcesContent":["import {\n  Image,\n  ImageSource,\n  Options,\n  ComputedOptions,\n  Callback,\n  Filter\n} from './typing'\n\nimport { Palette, Swatch } from './color'\n\nimport Builder from './builder'\n\nimport * as Util from './util'\n\nimport * as Quantizer from './quantizer'\nimport * as Generator from './generator'\nimport * as Filters from './filter'\n\nimport defaults = require('lodash/defaults')\n\nclass Vibrant {\n  static Builder = Builder\n  static Quantizer = Quantizer\n  static Generator = Generator\n  static Filter = Filters\n  static Util = Util\n  static Swatch = Swatch\n\n  static DefaultOpts: Partial<Options> = {\n    colorCount: 64,\n    quality: 5,\n    generator: Generator.Default,\n    ImageClass: null!,\n    quantizer: Quantizer.MMCQ,\n    filters: [Filters.Default]\n  }\n\n  static from(src: ImageSource): Builder {\n    return new Builder(src)\n  }\n\n  opts: ComputedOptions\n  private _palette: Palette\n  constructor(private _src: ImageSource, opts?: Partial<Options>) {\n    this.opts = <ComputedOptions>defaults({}, opts, Vibrant.DefaultOpts)\n    this.opts.combinedFilter = Filters.combineFilters(this.opts.filters)!\n  }\n  private _process(image: Image, opts: ComputedOptions): Promise<Palette> {\n    let { quantizer, generator } = opts\n\n    image.scaleDown(opts)\n\n    return image.applyFilter(opts.combinedFilter)\n      .then((imageData) => quantizer(imageData.data, opts))\n      .then((colors) => Swatch.applyFilter(colors, opts.combinedFilter))\n      .then((colors) => Promise.resolve(generator!(colors)))\n  }\n\n  palette(): Palette {\n    return this.swatches()\n  }\n  swatches(): Palette {\n    return this._palette\n  }\n\n  getPalette(cb?: Callback<Palette>): Promise<Palette> {\n    let image = new this.opts.ImageClass()\n    const result = image.load(this._src)\n      .then((image) => this._process(image, this.opts))\n      .then((palette) => {\n        this._palette = palette\n        image.remove()\n        return palette\n      }, (err) => {\n        image.remove()\n        throw err\n      })\n    if (cb) result.then((palette) => cb(null!, palette), (err) => cb(err))\n    return result\n  }\n}\n\nexport default Vibrant\n"]},"metadata":{},"sourceType":"script"}