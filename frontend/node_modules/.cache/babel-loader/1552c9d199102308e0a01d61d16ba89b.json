{"ast":null,"code":"/*\nCopyright (c) 2014, Yahoo! Inc. All rights reserved.\nCopyrights licensed under the New BSD License.\nSee the accompanying LICENSE file for terms.\n*/\n\n/* jslint esnext: true */\n\"use strict\";\n\nvar src$utils$$ = require(\"./utils\"),\n    src$es5$$ = require(\"./es5\"),\n    src$compiler$$ = require(\"./compiler\"),\n    intl$messageformat$parser$$ = require(\"intl-messageformat-parser\");\n\nexports[\"default\"] = MessageFormat; // -- MessageFormat --------------------------------------------------------\n\nfunction MessageFormat(message, locales, formats) {\n  // Parse string messages into an AST.\n  var ast = typeof message === 'string' ? MessageFormat.__parse(message) : message;\n\n  if (!(ast && ast.type === 'messageFormatPattern')) {\n    throw new TypeError('A message must be provided as a String or AST.');\n  } // Creates a new object with the specified `formats` merged with the default\n  // formats.\n\n\n  formats = this._mergeFormats(MessageFormat.formats, formats); // Defined first because it's used to build the format pattern.\n\n  src$es5$$.defineProperty(this, '_locale', {\n    value: this._resolveLocale(locales)\n  }); // Compile the `ast` to a pattern that is highly optimized for repeated\n  // `format()` invocations. **Note:** This passes the `locales` set provided\n  // to the constructor instead of just the resolved locale.\n\n  var pluralFn = this._findPluralRuleFunction(this._locale);\n\n  var pattern = this._compilePattern(ast, locales, formats, pluralFn); // \"Bind\" `format()` method to `this` so it can be passed by reference like\n  // the other `Intl` APIs.\n\n\n  var messageFormat = this;\n\n  this.format = function (values) {\n    try {\n      return messageFormat._format(pattern, values);\n    } catch (e) {\n      if (e.variableId) {\n        throw new Error('The intl string context variable \\'' + e.variableId + '\\'' + ' was not provided to the string \\'' + message + '\\'');\n      } else {\n        throw e;\n      }\n    }\n  };\n} // Default format options used as the prototype of the `formats` provided to the\n// constructor. These are used when constructing the internal Intl.NumberFormat\n// and Intl.DateTimeFormat instances.\n\n\nsrc$es5$$.defineProperty(MessageFormat, 'formats', {\n  enumerable: true,\n  value: {\n    number: {\n      'currency': {\n        style: 'currency'\n      },\n      'percent': {\n        style: 'percent'\n      }\n    },\n    date: {\n      'short': {\n        month: 'numeric',\n        day: 'numeric',\n        year: '2-digit'\n      },\n      'medium': {\n        month: 'short',\n        day: 'numeric',\n        year: 'numeric'\n      },\n      'long': {\n        month: 'long',\n        day: 'numeric',\n        year: 'numeric'\n      },\n      'full': {\n        weekday: 'long',\n        month: 'long',\n        day: 'numeric',\n        year: 'numeric'\n      }\n    },\n    time: {\n      'short': {\n        hour: 'numeric',\n        minute: 'numeric'\n      },\n      'medium': {\n        hour: 'numeric',\n        minute: 'numeric',\n        second: 'numeric'\n      },\n      'long': {\n        hour: 'numeric',\n        minute: 'numeric',\n        second: 'numeric',\n        timeZoneName: 'short'\n      },\n      'full': {\n        hour: 'numeric',\n        minute: 'numeric',\n        second: 'numeric',\n        timeZoneName: 'short'\n      }\n    }\n  }\n}); // Define internal private properties for dealing with locale data.\n\nsrc$es5$$.defineProperty(MessageFormat, '__localeData__', {\n  value: src$es5$$.objCreate(null)\n});\nsrc$es5$$.defineProperty(MessageFormat, '__addLocaleData', {\n  value: function (data) {\n    if (!(data && data.locale)) {\n      throw new Error('Locale data provided to IntlMessageFormat is missing a ' + '`locale` property');\n    }\n\n    MessageFormat.__localeData__[data.locale.toLowerCase()] = data;\n  }\n}); // Defines `__parse()` static method as an exposed private.\n\nsrc$es5$$.defineProperty(MessageFormat, '__parse', {\n  value: intl$messageformat$parser$$[\"default\"].parse\n}); // Define public `defaultLocale` property which defaults to English, but can be\n// set by the developer.\n\nsrc$es5$$.defineProperty(MessageFormat, 'defaultLocale', {\n  enumerable: true,\n  writable: true,\n  value: undefined\n});\n\nMessageFormat.prototype.resolvedOptions = function () {\n  // TODO: Provide anything else?\n  return {\n    locale: this._locale\n  };\n};\n\nMessageFormat.prototype._compilePattern = function (ast, locales, formats, pluralFn) {\n  var compiler = new src$compiler$$[\"default\"](locales, formats, pluralFn);\n  return compiler.compile(ast);\n};\n\nMessageFormat.prototype._findPluralRuleFunction = function (locale) {\n  var localeData = MessageFormat.__localeData__;\n  var data = localeData[locale.toLowerCase()]; // The locale data is de-duplicated, so we have to traverse the locale's\n  // hierarchy until we find a `pluralRuleFunction` to return.\n\n  while (data) {\n    if (data.pluralRuleFunction) {\n      return data.pluralRuleFunction;\n    }\n\n    data = data.parentLocale && localeData[data.parentLocale.toLowerCase()];\n  }\n\n  throw new Error('Locale data added to IntlMessageFormat is missing a ' + '`pluralRuleFunction` for :' + locale);\n};\n\nMessageFormat.prototype._format = function (pattern, values) {\n  var result = '',\n      i,\n      len,\n      part,\n      id,\n      value,\n      err;\n\n  for (i = 0, len = pattern.length; i < len; i += 1) {\n    part = pattern[i]; // Exist early for string parts.\n\n    if (typeof part === 'string') {\n      result += part;\n      continue;\n    }\n\n    id = part.id; // Enforce that all required values are provided by the caller.\n\n    if (!(values && src$utils$$.hop.call(values, id))) {\n      err = new Error('A value must be provided for: ' + id);\n      err.variableId = id;\n      throw err;\n    }\n\n    value = values[id]; // Recursively format plural and select parts' option — which can be a\n    // nested pattern structure. The choosing of the option to use is\n    // abstracted-by and delegated-to the part helper object.\n\n    if (part.options) {\n      result += this._format(part.getOption(value), values);\n    } else {\n      result += part.format(value);\n    }\n  }\n\n  return result;\n};\n\nMessageFormat.prototype._mergeFormats = function (defaults, formats) {\n  var mergedFormats = {},\n      type,\n      mergedType;\n\n  for (type in defaults) {\n    if (!src$utils$$.hop.call(defaults, type)) {\n      continue;\n    }\n\n    mergedFormats[type] = mergedType = src$es5$$.objCreate(defaults[type]);\n\n    if (formats && src$utils$$.hop.call(formats, type)) {\n      src$utils$$.extend(mergedType, formats[type]);\n    }\n  }\n\n  return mergedFormats;\n};\n\nMessageFormat.prototype._resolveLocale = function (locales) {\n  if (typeof locales === 'string') {\n    locales = [locales];\n  } // Create a copy of the array so we can push on the default locale.\n\n\n  locales = (locales || []).concat(MessageFormat.defaultLocale);\n  var localeData = MessageFormat.__localeData__;\n  var i, len, localeParts, data; // Using the set of locales + the default locale, we look for the first one\n  // which that has been registered. When data does not exist for a locale, we\n  // traverse its ancestors to find something that's been registered within\n  // its hierarchy of locales. Since we lack the proper `parentLocale` data\n  // here, we must take a naive approach to traversal.\n\n  for (i = 0, len = locales.length; i < len; i += 1) {\n    localeParts = locales[i].toLowerCase().split('-');\n\n    while (localeParts.length) {\n      data = localeData[localeParts.join('-')];\n\n      if (data) {\n        // Return the normalized locale string; e.g., we return \"en-US\",\n        // instead of \"en-us\".\n        return data.locale;\n      }\n\n      localeParts.pop();\n    }\n  }\n\n  var defaultLocale = locales.pop();\n  throw new Error('No locale data has been added to IntlMessageFormat for: ' + locales.join(', ') + ', or the default locale: ' + defaultLocale);\n};","map":{"version":3,"mappings":"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","names":["MessageFormat","message","locales","formats","ast","__parse","type","TypeError","_mergeFormats","value","_resolveLocale","pluralFn","_findPluralRuleFunction","_locale","pattern","_compilePattern","messageFormat","format","values","_format","e","variableId","Error","enumerable","number","style","date","month","day","year","weekday","time","hour","minute","second","timeZoneName","data","locale","__localeData__","toLowerCase","parse","writable","undefined","prototype","resolvedOptions","compiler","src$compiler$$","compile","localeData","pluralRuleFunction","parentLocale","result","i","len","part","id","err","length","src$utils$$","call","options","getOption","defaults","mergedFormats","mergedType","src$es5$$","concat","defaultLocale","localeParts","split","join","pop"],"sources":["/src/core.js"],"sourcesContent":["/*\nCopyright (c) 2014, Yahoo! Inc. All rights reserved.\nCopyrights licensed under the New BSD License.\nSee the accompanying LICENSE file for terms.\n*/\n\n/* jslint esnext: true */\n\nimport {extend, hop} from './utils';\nimport {defineProperty, objCreate} from './es5';\nimport Compiler from './compiler';\nimport parser from 'intl-messageformat-parser';\n\nexport default MessageFormat;\n\n// -- MessageFormat --------------------------------------------------------\n\nfunction MessageFormat(message, locales, formats) {\n    // Parse string messages into an AST.\n    var ast = typeof message === 'string' ?\n            MessageFormat.__parse(message) : message;\n\n    if (!(ast && ast.type === 'messageFormatPattern')) {\n        throw new TypeError('A message must be provided as a String or AST.');\n    }\n\n    // Creates a new object with the specified `formats` merged with the default\n    // formats.\n    formats = this._mergeFormats(MessageFormat.formats, formats);\n\n    // Defined first because it's used to build the format pattern.\n    defineProperty(this, '_locale',  {value: this._resolveLocale(locales)});\n\n    // Compile the `ast` to a pattern that is highly optimized for repeated\n    // `format()` invocations. **Note:** This passes the `locales` set provided\n    // to the constructor instead of just the resolved locale.\n    var pluralFn = this._findPluralRuleFunction(this._locale);\n    var pattern  = this._compilePattern(ast, locales, formats, pluralFn);\n\n    // \"Bind\" `format()` method to `this` so it can be passed by reference like\n    // the other `Intl` APIs.\n    var messageFormat = this;\n    this.format = function (values) {\n      try {\n        return messageFormat._format(pattern, values);\n      } catch (e) {\n        if (e.variableId) {\n          throw new Error(\n            'The intl string context variable \\'' + e.variableId + '\\'' +\n            ' was not provided to the string \\'' + message + '\\''\n          );\n        } else {\n          throw e;\n        }\n      }\n    };\n}\n\n// Default format options used as the prototype of the `formats` provided to the\n// constructor. These are used when constructing the internal Intl.NumberFormat\n// and Intl.DateTimeFormat instances.\ndefineProperty(MessageFormat, 'formats', {\n    enumerable: true,\n\n    value: {\n        number: {\n            'currency': {\n                style: 'currency'\n            },\n\n            'percent': {\n                style: 'percent'\n            }\n        },\n\n        date: {\n            'short': {\n                month: 'numeric',\n                day  : 'numeric',\n                year : '2-digit'\n            },\n\n            'medium': {\n                month: 'short',\n                day  : 'numeric',\n                year : 'numeric'\n            },\n\n            'long': {\n                month: 'long',\n                day  : 'numeric',\n                year : 'numeric'\n            },\n\n            'full': {\n                weekday: 'long',\n                month  : 'long',\n                day    : 'numeric',\n                year   : 'numeric'\n            }\n        },\n\n        time: {\n            'short': {\n                hour  : 'numeric',\n                minute: 'numeric'\n            },\n\n            'medium':  {\n                hour  : 'numeric',\n                minute: 'numeric',\n                second: 'numeric'\n            },\n\n            'long': {\n                hour        : 'numeric',\n                minute      : 'numeric',\n                second      : 'numeric',\n                timeZoneName: 'short'\n            },\n\n            'full': {\n                hour        : 'numeric',\n                minute      : 'numeric',\n                second      : 'numeric',\n                timeZoneName: 'short'\n            }\n        }\n    }\n});\n\n// Define internal private properties for dealing with locale data.\ndefineProperty(MessageFormat, '__localeData__', {value: objCreate(null)});\ndefineProperty(MessageFormat, '__addLocaleData', {value: function (data) {\n    if (!(data && data.locale)) {\n        throw new Error(\n            'Locale data provided to IntlMessageFormat is missing a ' +\n            '`locale` property'\n        );\n    }\n\n    MessageFormat.__localeData__[data.locale.toLowerCase()] = data;\n}});\n\n// Defines `__parse()` static method as an exposed private.\ndefineProperty(MessageFormat, '__parse', {value: parser.parse});\n\n// Define public `defaultLocale` property which defaults to English, but can be\n// set by the developer.\ndefineProperty(MessageFormat, 'defaultLocale', {\n    enumerable: true,\n    writable  : true,\n    value     : undefined\n});\n\nMessageFormat.prototype.resolvedOptions = function () {\n    // TODO: Provide anything else?\n    return {\n        locale: this._locale\n    };\n};\n\nMessageFormat.prototype._compilePattern = function (ast, locales, formats, pluralFn) {\n    var compiler = new Compiler(locales, formats, pluralFn);\n    return compiler.compile(ast);\n};\n\nMessageFormat.prototype._findPluralRuleFunction = function (locale) {\n    var localeData = MessageFormat.__localeData__;\n    var data       = localeData[locale.toLowerCase()];\n\n    // The locale data is de-duplicated, so we have to traverse the locale's\n    // hierarchy until we find a `pluralRuleFunction` to return.\n    while (data) {\n        if (data.pluralRuleFunction) {\n            return data.pluralRuleFunction;\n        }\n\n        data = data.parentLocale && localeData[data.parentLocale.toLowerCase()];\n    }\n\n    throw new Error(\n        'Locale data added to IntlMessageFormat is missing a ' +\n        '`pluralRuleFunction` for :' + locale\n    );\n};\n\nMessageFormat.prototype._format = function (pattern, values) {\n    var result = '',\n        i, len, part, id, value, err;\n\n    for (i = 0, len = pattern.length; i < len; i += 1) {\n        part = pattern[i];\n\n        // Exist early for string parts.\n        if (typeof part === 'string') {\n            result += part;\n            continue;\n        }\n\n        id = part.id;\n\n        // Enforce that all required values are provided by the caller.\n        if (!(values && hop.call(values, id))) {\n          err = new Error('A value must be provided for: ' + id);\n          err.variableId = id;\n          throw err;\n        }\n\n        value = values[id];\n\n        // Recursively format plural and select parts' option — which can be a\n        // nested pattern structure. The choosing of the option to use is\n        // abstracted-by and delegated-to the part helper object.\n        if (part.options) {\n            result += this._format(part.getOption(value), values);\n        } else {\n            result += part.format(value);\n        }\n    }\n\n    return result;\n};\n\nMessageFormat.prototype._mergeFormats = function (defaults, formats) {\n    var mergedFormats = {},\n        type, mergedType;\n\n    for (type in defaults) {\n        if (!hop.call(defaults, type)) { continue; }\n\n        mergedFormats[type] = mergedType = objCreate(defaults[type]);\n\n        if (formats && hop.call(formats, type)) {\n            extend(mergedType, formats[type]);\n        }\n    }\n\n    return mergedFormats;\n};\n\nMessageFormat.prototype._resolveLocale = function (locales) {\n    if (typeof locales === 'string') {\n        locales = [locales];\n    }\n\n    // Create a copy of the array so we can push on the default locale.\n    locales = (locales || []).concat(MessageFormat.defaultLocale);\n\n    var localeData = MessageFormat.__localeData__;\n    var i, len, localeParts, data;\n\n    // Using the set of locales + the default locale, we look for the first one\n    // which that has been registered. When data does not exist for a locale, we\n    // traverse its ancestors to find something that's been registered within\n    // its hierarchy of locales. Since we lack the proper `parentLocale` data\n    // here, we must take a naive approach to traversal.\n    for (i = 0, len = locales.length; i < len; i += 1) {\n        localeParts = locales[i].toLowerCase().split('-');\n\n        while (localeParts.length) {\n            data = localeData[localeParts.join('-')];\n            if (data) {\n                // Return the normalized locale string; e.g., we return \"en-US\",\n                // instead of \"en-us\".\n                return data.locale;\n            }\n\n            localeParts.pop();\n        }\n    }\n\n    var defaultLocale = locales.pop();\n    throw new Error(\n        'No locale data has been added to IntlMessageFormat for: ' +\n        locales.join(', ') + ', or the default locale: ' + defaultLocale\n    );\n};\n"]},"metadata":{},"sourceType":"script"}